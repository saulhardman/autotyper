{"version":3,"file":"index.min.js","sources":["../src/data-attributes-to-object.js","../src/param-case-to-camel-case.js","../src/upper-case-first-letter.js","../src/interval.js","../src/random-number.js","../src/autotyper.js"],"sourcesContent":["import paramCaseToCamelCase from './param-case-to-camel-case';\n\nfunction attributeName(name, namespace) {\n  if (namespace) {\n    return `data-${namespace}-${name}`;\n  }\n\n  return `data-${name}`;\n}\n\nexport default function dataAttributesToObject(element, names, namespace) {\n  return names.reduce((obj, name) => {\n    const value = element.getAttribute(attributeName(name, namespace));\n    const propertyName = paramCaseToCamelCase(name);\n\n    if (value === null) {\n      return obj;\n    }\n\n    return { ...obj, [propertyName]: JSON.parse(value) };\n  }, {});\n}\n","import upperCaseFirstLetter from './upper-case-first-letter';\n\nexport default function paramCaseToCamelCase(string) {\n  return string\n    .split('-')\n    .map((s, i) => {\n      if (i === 0) {\n        return s;\n      }\n\n      return upperCaseFirstLetter(s);\n    })\n    .join('');\n}\n","export default function upperCaseFirstLetter(string) {\n  // e.g. text => Text\n  return `${string.substring(0, 1).toUpperCase()}${string.substring(1)}`;\n}\n","import randomNumber from './random-number';\n\nexport default function(interval) {\n  let value;\n\n  if (Array.isArray(interval) && interval.length === 2) {\n    const [min, max] = interval;\n\n    value = randomNumber(min, max);\n  } else if (typeof interval === 'function') {\n    value = interval();\n  } else {\n    value = parseInt(interval, 10);\n  }\n\n  return value;\n}\n","export default function randomNumber(min, max) {\n  // return a random number between min and max (inclusive of min and max)\n  const minimum = Math.min(min, max);\n  const maximum = Math.max(min, max);\n  const multiplier = maximum - minimum + 1;\n\n  return Math.floor(Math.random() * multiplier) + minimum;\n}\n","import Emitter from 'component-emitter';\n\nimport { name, version } from '../package.json';\n\nimport dataAttributesToObject from './data-attributes-to-object';\nimport interval from './interval';\n\nexport const NAME = name;\nexport const VERSION = version;\n\nconst INIT = 'init';\nconst START = 'start';\nconst TYPE = 'type';\nconst LOOP = 'loop';\nconst STOP = 'stop';\nconst DESTROY = 'destroy';\n\nexport const EVENTS = {\n  INIT,\n  START,\n  TYPE,\n  LOOP,\n  STOP,\n  DESTROY,\n};\n\nexport const DATA_ATTRIBUTES = [\n  'text',\n  'interval',\n  'auto-start',\n  'loop',\n  'loop-interval',\n  'empty',\n];\n\nexport const DEFAULTS = {\n  text: 'This is the default text.',\n  interval: [200, 300],\n  autoStart: true,\n  loop: false,\n  loopInterval: 0,\n  empty: '\\u00A0',\n};\n\nexport default Emitter({\n  init(...args) {\n    const [element = null, options = {}] = this.parseArguments(args);\n\n    if (element) {\n      const text = element.innerHTML.trim();\n      const dataOptions = {\n        ...dataAttributesToObject(element, DATA_ATTRIBUTES, NAME),\n        ...JSON.parse(element.getAttribute(`data-${NAME}-options`)),\n      };\n\n      this.element = element;\n\n      this.settings = {\n        ...DEFAULTS,\n        ...(text ? { text } : {}),\n        ...dataOptions,\n        ...options,\n      };\n\n      Object.defineProperty(this, 'text', {\n        set(value) {\n          if (this.element) {\n            this.element.innerHTML = value;\n          }\n        },\n\n        get() {\n          return this.text;\n        },\n      });\n    } else {\n      this.settings = { ...DEFAULTS, ...options };\n    }\n\n    this.isRunning = false;\n\n    this.reset();\n\n    this.emit(INIT);\n\n    if (this.settings.autoStart === true) {\n      this.start();\n    } else {\n      const delay = parseInt(this.settings.autoStart, 10);\n\n      if (!isNaN(delay)) {\n        setTimeout(() => this.start(), delay);\n      }\n    }\n\n    return this;\n  },\n\n  parseArguments(args) {\n    if (args.length === 0) {\n      return args;\n    }\n\n    const [firstArg] = args;\n\n    if (process.env.NODE_ENV === 'test') {\n      if (firstArg instanceof window.HTMLElement) {\n        return args;\n      }\n\n      return [null, firstArg];\n    }\n\n    if (firstArg instanceof HTMLElement) {\n      return args;\n    }\n\n    return [null, firstArg];\n  },\n\n  reset() {\n    this.letterTotal = this.settings.text.length;\n    this.letterCount = 0;\n\n    if (this.settings.loop) {\n      if (typeof this.settings.loop === 'number') {\n        this.loopTotal = this.settings.loop;\n      }\n\n      this.loopCount = 0;\n    }\n\n    return this;\n  },\n\n  start() {\n    if (this.isRunning) {\n      return this;\n    }\n\n    clearTimeout(this.timeout);\n\n    this.isRunning = true;\n\n    this.emit(START);\n\n    this.type();\n\n    return this;\n  },\n\n  type() {\n    let text;\n    let character;\n\n    this.tick(interval(this.settings.interval));\n\n    if (this.letterCount > this.letterTotal) {\n      if (this.settings.loop) {\n        return this.loop();\n      }\n\n      return this.stop();\n    }\n\n    if (this.letterCount === 0) {\n      if (this.settings.empty === false) {\n        this.letterCount += 1;\n\n        text = this.settings.text.substring(0, this.letterCount);\n\n        character = this.settings.text.substring(\n          this.letterCount - 1,\n          this.letterCount,\n        );\n      } else if (typeof this.settings.empty === 'string') {\n        text = this.settings.empty;\n\n        character = this.settings.empty;\n      }\n    } else {\n      text = this.settings.text.substring(0, this.letterCount);\n\n      character = this.settings.text.substring(\n        this.letterCount - 1,\n        this.letterCount,\n      );\n    }\n\n    this.text = text;\n\n    this.emit(TYPE, text, character);\n\n    this.letterCount += 1;\n\n    return this;\n  },\n\n  stop() {\n    if (!this.isRunning) {\n      return this;\n    }\n\n    clearTimeout(this.timeout);\n\n    this.isRunning = false;\n\n    this.emit(STOP);\n\n    return this;\n  },\n\n  destroy() {\n    if (this.isRunning) {\n      this.stop();\n    }\n\n    this.emit(DESTROY);\n\n    this.off();\n\n    this.element = null;\n  },\n\n  tick(duration) {\n    clearTimeout(this.timeout);\n\n    this.timeout = setTimeout(() => this.type(), duration);\n\n    return this;\n  },\n\n  loop() {\n    this.tick(interval(this.settings.loopInterval));\n\n    if (this.loopCount === this.loopTotal) {\n      return this.stop();\n    }\n\n    this.loopCount += 1;\n\n    this.letterCount = 0;\n\n    this.emit(LOOP, this.loopCount);\n\n    return this;\n  },\n\n  empty() {\n    clearTimeout(this.timeout);\n\n    if (typeof this.settings.empty === 'string') {\n      this.text = this.settings.empty;\n    } else {\n      this.text = DEFAULTS.empty;\n    }\n\n    this.letterCount = 0;\n\n    if (this.isRunning) {\n      this.tick(interval(this.settings.interval));\n    }\n\n    return this;\n  },\n\n  fill() {\n    clearTimeout(this.timeout);\n\n    this.text = this.settings.text;\n\n    this.letterCount = this.settings.text.length;\n\n    if (this.isRunning) {\n      this.tick(interval(this.settings.interval));\n    }\n\n    return this;\n  },\n});\n"],"names":["dataAttributesToObject","element","names","namespace","reduce","obj","name","value","getAttribute","attributeName","propertyName","split","map","s","i","string","substring","toUpperCase","upperCaseFirstLetter","join","JSON","parse","interval","Array","isArray","length","min","max","minimum","Math","multiplier","floor","random","randomNumber","parseInt","NAME","EVENTS","INIT","START","TYPE","LOOP","STOP","DESTROY","DATA_ATTRIBUTES","DEFAULTS","text","autoStart","loop","loopInterval","empty","Emitter","init","args","this","parseArguments","options","innerHTML","trim","dataOptions","settings","Object","defineProperty","set","get","isRunning","reset","emit","start","delay","isNaN","setTimeout","_this","firstArg","HTMLElement","letterTotal","letterCount","loopTotal","loopCount","clearTimeout","timeout","type","character","tick","stop","destroy","off","duration","_this2","fill"],"mappings":"89CAUe,SAASA,EAAuBC,EAASC,EAAOC,UACtDD,EAAME,QAAO,SAACC,EAAKC,OAClBC,EAAQN,EAAQO,aAV1B,SAAuBF,EAAMH,UACvBA,iBACaA,cAAaG,kBAGfA,GAKsBG,CAAcH,EAAMH,IACjDO,EAAoCJ,ECTzCK,MAAM,KACNC,KAAI,SAACC,EAAGC,UACG,IAANA,EACKD,ECPA,SAA8BE,mBAEjCA,EAAOC,UAAU,EAAG,GAAGC,sBAAgBF,EAAOC,UAAU,IDQvDE,CAAqBL,MAE7BM,KAAK,WDGQ,OAAVZ,EACKF,OAGGA,OAAMK,EAAeU,KAAKC,MAAMd,OAC3C,eGlBmBe,OAClBf,KAEAgB,MAAMC,QAAQF,IAAiC,IAApBA,EAASG,OAAc,SACjCH,KAEnBf,ECRW,SAAsBmB,EAAKC,OAElCC,EAAUC,KAAKH,IAAIA,EAAKC,GAExBG,EADUD,KAAKF,IAAID,EAAKC,GACDC,EAAU,SAEhCC,KAAKE,MAAMF,KAAKG,SAAWF,GAAcF,EDEtCK,iBAER1B,EAD6B,mBAAbe,EACRA,IAEAY,SAASZ,EAAU,WAGtBf,MERI4B,cAUAC,EAAS,CACpBC,KARW,OASXC,MARY,QASZC,KARW,OASXC,KARW,OASXC,KARW,OASXC,QARc,WAWHC,EAAkB,CAC7B,OACA,WACA,aACA,OACA,gBACA,SAGWC,EAAW,CACtBC,KAAM,4BACNvB,SAAU,CAAC,IAAK,KAChBwB,WAAW,EACXC,MAAM,EACNC,aAAc,EACdC,MAAO,OAGMC,EAAQ,CACrBC,kDAAQC,2BAAAA,wBACiCC,KAAKC,eAAeF,mBAApDnD,aAAU,cAAMsD,aAAU,QAE7BtD,EAAS,KACL4C,EAAO5C,EAAQuD,UAAUC,OACzBC,OACD1D,EAAuBC,EAAS0C,EAAiBR,MACjDf,KAAKC,MAAMpB,EAAQO,4BAAqB2B,sBAGxClC,QAAUA,OAEV0D,cACAf,KACCC,EAAO,CAAEA,KAAAA,GAAS,MACnBa,KACAH,GAGLK,OAAOC,eAAeR,KAAM,OAAQ,CAClCS,aAAIvD,GACE8C,KAAKpD,eACFA,QAAQuD,UAAYjD,IAI7BwD,sBACSV,KAAKR,kBAIXc,cAAgBf,KAAaW,WAG/BS,WAAY,OAEZC,aAEAC,KAzEI,SA2EuB,IAA5Bb,KAAKM,SAASb,eACXqB,YACA,KACCC,EAAQlC,SAASmB,KAAKM,SAASb,UAAW,IAE3CuB,MAAMD,IACTE,YAAW,kBAAMC,EAAKJ,UAASC,UAI5Bf,MAGTC,wBAAeF,MACO,IAAhBA,EAAK3B,cACA2B,MAGFoB,IAAYpB,eAUfoB,aAAoBC,YACfrB,EAGF,CAAC,KAAMoB,IAGhBP,6BACOS,YAAcrB,KAAKM,SAASd,KAAKpB,YACjCkD,YAAc,EAEftB,KAAKM,SAASZ,OACkB,iBAAvBM,KAAKM,SAASZ,YAClB6B,UAAYvB,KAAKM,SAASZ,WAG5B8B,UAAY,GAGZxB,MAGTc,wBACMd,KAAKW,UACAX,MAGTyB,aAAazB,KAAK0B,cAEbf,WAAY,OAEZE,KArIK,cAuILc,OAEE3B,OAGT2B,oBACMnC,EACAoC,cAECC,KAAK5D,EAAS+B,KAAKM,SAASrC,WAE7B+B,KAAKsB,YAActB,KAAKqB,YACtBrB,KAAKM,SAASZ,KACTM,KAAKN,OAGPM,KAAK8B,QAGW,IAArB9B,KAAKsB,aACqB,IAAxBtB,KAAKM,SAASV,YACX0B,aAAe,EAEpB9B,EAAOQ,KAAKM,SAASd,KAAK7B,UAAU,EAAGqC,KAAKsB,aAE5CM,EAAY5B,KAAKM,SAASd,KAAK7B,UAC7BqC,KAAKsB,YAAc,EACnBtB,KAAKsB,cAEiC,iBAAxBtB,KAAKM,SAASV,QAC9BJ,EAAOQ,KAAKM,SAASV,MAErBgC,EAAY5B,KAAKM,SAASV,QAG5BJ,EAAOQ,KAAKM,SAASd,KAAK7B,UAAU,EAAGqC,KAAKsB,aAE5CM,EAAY5B,KAAKM,SAASd,KAAK7B,UAC7BqC,KAAKsB,YAAc,EACnBtB,KAAKsB,mBAIJ9B,KAAOA,OAEPqB,KAnLI,OAmLOrB,EAAMoC,QAEjBN,aAAe,EAEbtB,OAGT8B,uBACO9B,KAAKW,WAIVc,aAAazB,KAAK0B,cAEbf,WAAY,OAEZE,KAjMI,QAmMFb,MATEA,MAYX+B,mBACM/B,KAAKW,gBACFmB,YAGFjB,KA1MO,gBA4MPmB,WAEApF,QAAU,MAGjBiF,cAAKI,qBACHR,aAAazB,KAAK0B,cAEbA,QAAUT,YAAW,kBAAMiB,EAAKP,SAAQM,GAEtCjC,MAGTN,4BACOmC,KAAK5D,EAAS+B,KAAKM,SAASX,eAE7BK,KAAKwB,YAAcxB,KAAKuB,UACnBvB,KAAK8B,aAGTN,WAAa,OAEbF,YAAc,OAEdT,KAtOI,OAsOOb,KAAKwB,WAEdxB,OAGTJ,wBACE6B,aAAazB,KAAK0B,SAEiB,iBAAxB1B,KAAKM,SAASV,WAClBJ,KAAOQ,KAAKM,SAASV,WAErBJ,KAAOD,EAASK,WAGlB0B,YAAc,EAEftB,KAAKW,gBACFkB,KAAK5D,EAAS+B,KAAKM,SAASrC,WAG5B+B,MAGTmC,uBACEV,aAAazB,KAAK0B,cAEblC,KAAOQ,KAAKM,SAASd,UAErB8B,YAActB,KAAKM,SAASd,KAAKpB,OAElC4B,KAAKW,gBACFkB,KAAK5D,EAAS+B,KAAKM,SAASrC,WAG5B+B"}